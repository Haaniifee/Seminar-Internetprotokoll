%\documentclass[12pt,a4paper]{scrbook}
\documentclass[12pt,a4paper,listof=totoc,captions=nooneline]{scrreprt} 
\usepackage{geometry}	
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[pdftex]{graphicx}
\usepackage[ngerman]{babel}
\usepackage{colortbl}	
\usepackage{xcolor}
\usepackage{soul}
\usepackage{float}
\usepackage{caption}
\usepackage{subcaption}
\usepackage[hyphens]{url}
%\usepackage{tocloft}
\usepackage[colorlinks,
pdfpagelabels,
pdfstartview = FitH,
bookmarksopen = true,
bookmarksnumbered = true,
linkcolor = black,
plainpages = false,
hypertexnames = false,
citecolor = black] {hyperref}
\usepackage{amsmath, amssymb, amstext, amsfonts, mathrsfs}	% Mathe

\usepackage{selinput} 
\SelectInputMappings{ 
adieresis={ä}, 
germandbls={ß}, 
}
\renewcommand{\familydefault}{\sfdefault}
\usepackage{graphicx}
\usepackage[onehalfspacing]{setspace}

\usepackage{chngcntr}
\counterwithout{equation}{chapter}


\definecolor{uhhred}{cmyk}{0,100,100,0}

\counterwithout{figure}{chapter}
\counterwithout{table}{chapter}
\addtokomafont{caption}{\centering}
\AfterTOCHead[lof]{\renewcommand*{\numberline}[1]{\nonumberline}}
\AfterTOCHead[toc]{\renewcommand*{\numberline}[1]{\nonumberline}}

\begin{document}

%\frontmatter
\newgeometry{centering,left=2cm,right=2cm,top=2cm,bottom=2cm}
\begin{titlepage}
\includegraphics[scale=0.3]{UHH-Logo_2010_Farbe_CMYK.pdf}
\vspace*{2cm}
\Large
\begin{center} 
      {\color{uhhred}\textbf{\so{Seminar-Arbeit}}}
%oder {\color{uhhred}\textbf{\so{MASTERTHESIS}}}
\vspace*{2.0cm}\\
{\LARGE \textbf{IP - Das Internetprotokoll}}
\vspace*{2.0cm}\\
\textbf{Leitung: Dr. Klaus-Dieter Heidtmann}\\ 
vorgelegt von Hanife
\vspace*{0.4cm}\\
%\textbf{Fulya Cankaya:} fulya-cankaya@hotmail.de (6809050) \\ \textbf{ Hanife Demircioglu:} h.demircioglu@hotmail.de (6816065) \\ 
\end{center}
\vspace*{3.9cm}

\noindent 
MIN-Fakultät \vspace*{0.4cm} \\ 
Fachbereich Informatik \\
Seminar Das Internet: Architektur und Anwendungen\\
Abgabedatum: 30.03.2018



\end{titlepage}

\restoregeometry
\pagenumbering{roman}
\tableofcontents

\section*{Abkürzungsverzeichnis}
\addcontentsline{toc}{section}{Abkürzungsverzeichnis} 
%\mainmatter 

\listoffigures

\newpage \section*{Einleitung}
\addcontentsline{toc}{section}{Einleitung} 
\pagenumbering{arabic}

Im Rahmen des Seminars "Das Internet: Architektur und Anwendungen " geht es darum, den Grundaufbau und wichtige Anwendungen des Internets zu verstehen. Diese Hausarbeit orientiert sich speziell am Thema "Das Internetprotokoll". 
Aufbauend auf der Definition der IP-Adresse werden vertieft in die Themen der IP-Adressierung, der Aufbau und Vergleich von IPv4 und IPv6 .... Eingegangen.\\
Dies ist ein kleiner Einblick in das Thema und wird in den nächsten Kapiteln ausgearbeitet.

\section*{Internetprotokoll (IP) - Einordnung Schichtenmodell }
\addcontentsline{toc}{section}{Internetprotokoll (IP) - Einordnung Schichtenmodell } 

\begin{figure}[H]
\begin{subfigure}{0.6\textwidth}

\includegraphics[width=0.6\textwidth]{bilder/b15.png}
\subcaption{Internet Protocol}

\end{subfigure}
\begin{subfigure}{0.6\textwidth}
\includegraphics[width=0.8\textwidth]{bilder/b16.png}
\subcaption{DoD\&OSI-Schichtenmodell}
\end{subfigure}
\caption[Abbildung 1: Schichtenmodell]{Schichtenmodell}
\end{figure}

\section*{Internetprotokoll (IP) - Einordnung Vermittlungstechnik }
\addcontentsline{toc}{section}{Internetprotokoll (IP) - Einordnung Vermittlungstechnik } 

\begin{figure}[H]
\includegraphics[width=1.2\textwidth]{bilder/b17.png}
\caption[Abbildung 2: Vermittlungstechnik]{Vermittlungstechnik}
\end{figure}


\section*{IP-Adressierung -Allgemein}
\addcontentsline{toc}{section}{IP-Adressierung -Allgemein} 
Die IP-Adresse ist eine Adresse in Netzwerken, die auf dem Internetprotokoll aufbaut. Jedes Gerät, dass an einem Netz gebunden ist, bekommt eine IP-Adresse zugewiesen. Somit sind die Geräte eindeutig gekennzeichnet und identifizierbar. Einem Rechner können eine oder mehrere IP-Adressen zugeordnet werden. Die IP-Adresse dient dazu, dass Daten vom Absender zum Empfänger versendet werden. Der Transport der Daten ist übertragbar mit der Postanschrift eines Briefumschlages. Die Datenpakete sind mit einer IP-Adresse gekennzeichnet, sodass der Empfänger eindeutig identifiziert wird. Anhand der IP-Adresse leiten die Router die Datenpakete in die entsprechenden Subnetze und werden dort weiter transportiert. Eine IP-Adresse ist nicht verbindlich einem Empfänger zuzuordnen, sondern kann auch ein gesamtes Netz kennzeichnen. Beispiele hierfür sind Broadcast oder Multicast. Unter einem Broadcast versteht man eine Nachricht, die von einem Rechner ausgelöst wird. Dabei werden die Datenpakete an alle Rechner im selben Netz verschickt und auf keinen Fall über einen Router zu jeweils anderen Subnetzen weitergeleitet. Ein Broadcast wird in der Vermittlungstechnik einer Mehrpunktverbindung zugeordnet. Wichtiger Hinweis hierbei ist, dass IPv6 keine Broadcasts mehr unterstützt. Stattdessen wird Multicasts verwendet. Bei einem Multicast handelt es sich ebenso um eine Mehrpunktverbindung. Die Nachricht wird von einem Punkt zu einer beliebigen Gruppe versendet. Der Unterschied zum Broadcast ist, dass es bei einem Multicast notwendig ist, sich vorerst beim Sender anzumelden. Beim Broadcast hingegen werden die Inhalte an alle Teilnehmer im Netz gesendet. 

\begin{figure}[H]
\begin{subfigure}{0.6\textwidth}

\includegraphics[width=0.6\textwidth]{bilder/b1.png}
\subcaption{Broadcast}

\end{subfigure}
\begin{subfigure}{0.6\textwidth}
\includegraphics[width=0.6\textwidth]{bilder/b2.png}
\subcaption{Multicast}
\end{subfigure}
\caption[Abbildung 3: Broadcast und Multicast]{Broadcast und Multicast}
\end{figure}

\section*{IP-Adressierung-Verwendungszweck}
\addcontentsline{toc}{section}{IP-Adressierung-Verwendungszweck} 
Die Hauptaufgabe der IP-Adressierung besteht im Transport der Daten. Dabei werden die Daten vom Absender zum Empfänger mit Hilfe von Datenpaketen weitergeleitet.

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b3.png}
\end{center}
\caption[Abbildung 4: Beispiel mit einem Klienten und Webserver für den Verwendungszweck der IP-Adressierung]{Beispiel mit einem Klienten und Webserver für den Verwendungszweck der IP-Adressierung}
\end{figure}

Beispielsweise ist ein Webserver von einem Webbrowser über die IP-Adresse erreichbar. So kann eine Kommunikation untereinander erfolgen. Dazu muss der Webbrowser bei einem Nameserver nach der zugehörigen IP-Adresse des Webservers anfragen, die einer Domain angehört. Dabei wird die URL zu einer IP-Adresse umgeformt mittels der Namensauflösung, welches im Kapitel Domain Namensraum behandelt wird. Diese IP-Adresse wird verwendet, um Daten an den Webserver zu senden.

\section*{IP-Adressierung- Aufbau einer IPv4-Adresse}
\addcontentsline{toc}{section}{IP-Adressierung- Aufbau einer IPv4-Adresse} 

Jede IP-Adresse besteht aus 4 Zahlenblöcken. Diese wird als Dezimalzahl notiert. Die interne Verwaltung ist jedoch die binäre Darstellung. Dabei belegt jeder Zahlenblock 8 Bits. Somit sind Zahlen von 0-255 darstellbar. Da jeder Zahlenblock mit 8 Bits belegt ist, besteht eine IP-Adresse aus 32 Bits und deswegen sind insgesamt 232 = 4.294.967.296 IP-Adressen darstellbar.\\
Beispiel:\\
Dezimale Schreibweise: 171.15.245.1\\
$\longrightarrow$ binäre Schreibweise: 10101011 00001111 11110101 00000001 \\
Die IP-Adresse setzt sich zusammen aus einer Netzadresse und einer Hostadresse. Für die Trennung in Netz- und Hostadresse ist die Subnetzmaske verantwortlich. Diese bestimmt an welcher Stelle genau die Trennung stattfindet. Die Hostadresse bestimmt den Rechner und die Netzadresse bestimmt das Subnetz, um den Rechner letztendlich über die Hostadresse zu finden. Wenn man Datenpakete verschicken möchte, schaut man sich zunächst die Netzadresse an. Ist die Netzadresse sowohl beim Absender, als auch beim Empfänger identisch bleibt das Datenpaket im selben Subnetz und muss nicht über einen Standart-Gateway in ein anderes Subnetz mittels eines Routers weitergeleitet werden. 

\section*{IP-Adressierung- Netzklassen}
\addcontentsline{toc}{section}{IP-Adressierung- Netzklassen} 
Netzwerke sind in verschiedene Klassen unterteilt. Die Klasse A hat eine Netzmaske von 255.0.0.0 und somit werden 8 Bits für die Netz-Adresse und 24 Bit für die Host Adresse verwendet. Insgesamt erhält man $2^{24} -2$ Hostadressen, die darstellbar sind. Der Adressbereich geht von 0-127. Bei der Klasse B ist die Subnetzmaske 255.255.0.0. Somit werden 16 Bits für die Netzadresse und 16 für die Hostadresse verwendet. Insgesamt $2^{16} -2$ Hosts im Netz. Der Adressbereich geht von 128-191.
Bei der Klasse C ist die Subnetzmaske 255.255.255.0 und somit werden 24 Bits für die Netzadresse und 8 Bits für die Host Adresse verwendet. Durch die Netzklasse wird die Netzadresse, als auch die Hostadresse abgeleitet, da man anhand der Subnetzmaske festlegt, wie diese auszusehen haben.

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b4.png}
\end{center}
\caption[Abbildung 5: Aufteilung in Netzklassen]{Aufteilung in Netzklassen}
\end{figure}

Netzklassen werden in der Praxis kaum verwendet. Aufgrund der Netzklassen wurden die meisten zur Verfügung stehenden öffentlichen IP-Adressen vergeben. Die Größe eines Netzwerkes wird anhand der Angabe der Subnetzmaske bestimmt und nicht aus der IP-Adresse und der Netzklasse.

\section*{Classless Inter-Domain Routing}
\addcontentsline{toc}{section}{Classless Inter-Domain Routing} 

Unter einem Classless Inter-Domain Routing versteht man das effiziente Nutzen des bestehenden Adressraums einer IPv4-Adresse. Man möchte erreichen, dass die Routingtabellen reduziert werden, sodass der bestehende Adressraum effizient genutzt werden kann. Damit benötigt man die Netzklassen nicht mehr, da die IPv4-Adressen nicht mehr zu einer Klasse zugeordnet werden müssen. Zudem ist die Präfixlänge frei wählbar, sprich man erkennt, wie viele IPv4-Adressen für Hosts im Netzwerk verfügbar sind.

\section*{IP-Adressierung IPv6}
\addcontentsline{toc}{section}{IP-Adressierung IPv6} 

Der Grund, weshalb IPv6 eingeführt wurde, ist, dass der IPv4 Adressraum in Zukunft ausgebraucht wird. Der IPv6 Adressraum besteht aus 128 Bits. Somit können $2^{128} = 340.282.366.920.938.463.463.374.607.431.768.211.456 \approx 3,4 \cdot 10^{38}$ ca. 340 Sextillionen IP-Adressen dargestellt werden. Die Dezimaldarstellung ist:\\ ddd.ddd.ddd.ddd.ddd.ddd.ddd.ddd.ddd.ddd.ddd.ddd.ddd.ddd.ddd.ddd. \\Die Adresse setzt sich zusammen aus 8 Blöcken mit jeweils 16 Bits. Die Notation dieser Adresse ist eine Hexadezimalzahl. Beispielsweise könnte diese so aussehen \dq 2001:0db8:85a3:0000:0000:8a2e:0370:7344\dq. Man verwendet die Hexadezimaldarstellung, weil die Dezimaldarstellung unübersichtlich wäre aufgrund der langen Adresse, die sich deshalb ergibt. Damit es übersichtlicher wird, werden zwei Oktette der Adresse zusammengefasst, sodass man insgesamt 8 Blöcke mit jeweils 16 Bit hat. Diese werden mit einem Doppelpunkt getrennt. Jeweils vier Bits der IPv6 Adresse stellen eine Hexadezimalzahl dar.

\section*{IP-Adressierung IPv6 Adresszuweisung}
\addcontentsline{toc}{section}{IP-Adressierung IPv6 Adresszuweisung} 

Die ersten 32 Bits der IPv6 Adresse bekommt der Internetprovider von der Regional Internet Registry (RIR) zugewiesen. Diese werden in weitere Subnetze aufgeteilt. Der Internet Provider ist für die Zuteilung der Länge verantwortlich. Eine minimale Zuteilung eine /64-Netzes ist vorgeschrieben. Die erste Hälfte mit 64 Bit einer Adresse ist das Netzsegment und die restlichen 64 Bits gehören zum Interface-Identifier. Die beiden zusammen bilden die IPv6-Adresse. Üblicherweise wird der Interface-Identifier aus der Mac-Adresse der Schnittstelle bestimmt werden. Ein Beispiel hierfür ist:\\ 2001:0db8:85a3:08d3:1319:8a2e:0370:7347/64.

\section*{IP-Adressierung-IPv6-Aufteilung der Adresse}
\addcontentsline{toc}{section}{IP-Adressierung-IPv6-Aufteilung der Adresse} 

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b5.png}
\end{center}
\caption[Abbildung 6: IPv6-Aufteilung der Adresse]{IPv6-Aufteilung der Adresse}
\end{figure}

\section*{Dual Stack}
\addcontentsline{toc}{section}{Dual Stack} 

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b6.png}
\end{center}
\caption[Abbildung 7: Dual Stack]{Dual Stack}
\end{figure}

Zurzeit besteht ein geringer Bestand an IPv4 Adressen. Wenn diese aufgebraucht sind, ist es notwendig auf IPv6 zurückzugreifen. Somit kann es zu einem Wechsel kommen, wenn der bestehende Adressbereich nicht effizient genutzt wird. Die Kunst hierbei ist, dass einerseits nicht nur die Einführung von IPv6 in Vordergrund steht, sondern gleichzeitig auch, dass IPv4 zur selben Zeit betrieben wird. Diesen Zustand bezeichnet man als "Dual Stack". Anhand der Abbildung wird im Folgenden auf die Funktionsweise eingegangen. \\
Der DS-Lite besitzt einen Internet-Anschluss, der einen öffentlichen IPv6-Präfix erhält. Damit ist er von überall aus erreichbar. Aus dem bestehenden Präfix weist der Router allen Geräten im selben Netz öffentliche IPv6-Adressen zu, die sich ins Internet verbinden möchten. Diese werden mit dem IPv6 Internet verbunden. Der DS-Lite-Anschluss erhält im Allgemeinen keine öffentlichen IPv4-Adressen. Jedoch wird ihm eine private IPv4 Adresse zugeteilt, welches jedoch nicht vom Internet aus erreichbar ist. Vom Internet sind nur IPv6 Adressen erreichbar. Die privat adressierten IPv4-Pakete werden vom Provider zu einer öffentlichen IPv4-Adresse maskiert. Die Maskierung bezeichnet man als Carrier Grade NAT (CGN). Der DSL-Router funktioniert im Prinzip genauso. Dieser besitzt eine öffentliche IPv4-Adresse und weist allen Geräten im Netzwerk private Adressen zu. \\
Man muss sowohl IPv4 als auch IPv6 betreiben, weshalb der Dual Stack bedeutend ist. Dieser Betrieb muss solange erfolgen, bis alle Geräte mit IPv6 umgehen können. Es gibt viele Endgeräte, die kein IPv6 unterstützen und erst durch entsprechende Komponenten ausgetauscht werden müssen. Außerdem ist der Markt für IPv6 nicht groß genug und eine Entwicklung als auch der Aufwand, die IPv4 Produkte auf IPv6 zu übertragen sich nicht lohnt.


\section*{Vorteile von IPv6}
\addcontentsline{toc}{section}{Vorteile von IPv6} 

Die Vorteile der IPv6 Adressierung sind, dass aufgrund der längeren Adresse ein viel größerer Adressraum existiert. Es können mehrere IPv6-Adressen pro Hosts verwendet werden. Diese haben dementsprechend unterschiedliche Gültigkeitsbereiche. Zudem ist eine Autokonfiguration der einzelnen Adressen möglich und ein Multicast ist ebenso durch spezielle Adressen möglich. Die IPv6 Adressierung ermöglicht ein schnelleres Routing und eine Punkt-zu-Punkt-Verschlüsselung mit IPsec. IPsec ist dafür zuständig, dass eine sichere Kommunikation aufgebaut wird, welches beispielsweise über das Internet eine sichere Kommunikation ermöglichen kann, da das Internet ein unsicheres Netz ist. Auf dem DoD Model wird das IPsec der Internetschicht zugeordnet. IPsec ist eine Weiterentwicklung der IP-Protokolle. Auf der Netzwerkebene möchte man eine verschlüsselungsbasierte Sicherheit aufstellen. Mit IPsec wird die Authentizität der Paketreihenfolge mittesls Verschlüsselung gewährleistet. Die Datenpakete einer IPv6 Adresse sind bis zu 4 GByte groß.

\section*{Statische und dynamische IP-Adresse}
\addcontentsline{toc}{section}{Statische und dynamische IP-Adresse} 

Nach der Zuweisung einer IP-Adresse ändert sich die IP-Adresse einer statischen Adresse nicht. Die Zuweisung selbst kann sowohl statisch als auch dynamisch sein. Zu einer statischen Adresse beispielsweise gehören Rechner, die sich fortlaufend im Internet befinden, wenn Sie bestimmte Dienste anbieten. Jeder Rechner kann sich eine eigene IP-Adresse zukommen lassen. Bei einer dynamischen IP-Adresse ist dies jedoch anders. Diese werden automatisch vom Internet Service Provider(ISP) vergeben, sobald man im Internet ist. Dynamisch Adressen ändern sich regelmäßig. Bei Routern beispielsweise ändert sich die IP-Adresse alle 24 Stunden. Dies geschieht in der Regel bei lokalen Netzwerken. Der Admin muss jedoch nicht jede einzelne statische IP-Adresse ins Netzwerk integrieren. In der Regel wird dies von einer Software übernommen, die für die Verteilung der dynamischen IP-Adressen zuständig sind. 

\section*{Vergabe von IP-Adressen}
\addcontentsline{toc}{section}{Vergabe von IP-Adressen} 

Zuständig für die Vergabe von IP-Adressen ist der IANA .Die IANA vergibt gesamte IP-Adressblöcke an die RIR. Diese vergibt die IP-Adressen in Regionen. Die Vergabe von IP-Adressen erfolgt durch die oberste Instanz \dq Internet Assigned Numbers Authority \dq (IANA), die über den gesamten IP-Adressraum herrscht. Sie vergibt IP-Adressblöcke an so genannte \dq Regional Internet Registries\dq (RIR), die für die IP-Adressvergabe in Regionen zuständig sind. Diese vergeben ihrerseits IP-Adressbereiche an z.B. Internet-Service-Providern (ISP) wie Telekom, 1\&1, Vodafone, O2, die ihren Endkunden gegen eine Gebühr den Zugang zum Internet ermöglichen.

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b7.png}
\end{center}
\caption[Abbildung 8: Vergabe von IP-Adressen]{Vergabe von IP-Adressen}
\end{figure}

Es gibt seit Februar 2005 insgesamt fünf regionale Vergabestellen, welche man als Regional Internet Registries (RIR) bezeichnet. Dazu gehören AfriNIC (African Network Information Centre). Diese ist zuständig für die Adressvergabe in Afrika. Hinzu kommt die APNIC (Asia Pacific Network Information Centre), welches zuständig für die Region Asien-Pazifik ist. Zudem gibt es die ARIN (American Registry for Internet Numbers), die für Nordamerika zuständig ist. Die LACNIC (Latin-American and Caribbean Network Information Centre) Vergabestelle ist für Lateinamerika und Karibik verantwortlich und zuletzt das RIPE NCC (Réseaux IP Européens Network Coordination Centre), welches für Europa, den Nahen Osten und Zentralasien zuständig ist.

\section*{IP-Routing}
\addcontentsline{toc}{section}{IP-Routing} 

Das Internetprotokoll (IP) ist routingfähig. Damit werden Datenpakete an Hosts gesendet. Wenn diese nicht im selben Subnetz sind, werden diese über einen Router zum entsprechenden Subnetz transportiert und weitergeleitet. Der Vorgang, wie das Internetprotokoll die Datenpakete vom Sender zum Empfänger schickt, wird als Routing bezeichnet. Dabei sind alle verfügbaren Routen in einer Routing-Tabelle gespeichert. Aus dieser wird dann bestimmt in welches Netz das Datenpaket weitergeleitet wird. Da Broadcasts ein Netzwerk belasten, versuchen die Router die Weiterleitung eines solchen zu verhindern. Jedoch nur dann,  wenn sie selbst nicht darauf angewiesen sind aufgrund der Routing-Tabellen.

\section*{IP-Routing-Algorithmus}
\addcontentsline{toc}{section}{IP-Routing-Algorithmus} 

Alle Datenpakete, die empfangen werden, durchlaufen einen Routing-Algoritmus. Dieser gewährleistet, dass die Datenpakete zugeordnet und zum Ziel-Empfänger weitergeleitet werden. \\
Die Abbildung 7 zeigt, wie der Routing-Algorithmus abläuft. Im Algorithmus geht es die ganze Zeit um das Datenpaket. Zunächst wird geprüft, ob das Datenpaket für einen selbst ist. Dabei wird die Ziel-Adresse des Datenpakets mit der eigenen IP-Adresse verglichen. Wenn diese übereinstimmt, kann mit der Verarbeitung begonnen werden. Andernfalls wird geprüft, ob das Datenpaket im selben Subnetz bleiben soll. Ist dies der Fall, wird das Datenpaket weitergeleitet. Ist dem nicht so, wird geprüft, ob die entsprechende Route bekannt ist. Ist die Route bekannt, wird weitergeleitet, ansonsten muss geprüft werden, ob ein Standartgateway vorhanden ist, der das Datenpaket weiterleiten kann. In der Regel schaut man hier in die Routing-Tabelle und leitet das Datenpaket gegebenfalls weiter. Wenn kein Standartgateway vorhanden ist, kommt es zu einer Fehlermeldung und das Datenpaket wird entsprechend verworfen.

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b8.png}
\end{center}
\caption[Abbildung 9: IP-Routing-Algorithmus]{IP-Routing-Algorithmus}
\end{figure}

\section*{IP-Paket}
\addcontentsline{toc}{section}{IP-Paket} 

\subsection*{Datagramm}
\addcontentsline{toc}{subsection}{Datagramm}


\subsection*{Aufbau}
\addcontentsline{toc}{subsection}{Aufbau}


\subsection*{IP-Header}
\addcontentsline{toc}{subsection}{IP-Header}

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b19.png}
\end{center}
\caption[Abbildung 10: IP-Header]{IP-Header}
\end{figure}

\subsubsection*{Version}
\addcontentsline{toc}{subsubsection}{Version}

\subsubsection*{IHL}
\addcontentsline{toc}{subsubsection}{IHL}

\subsubsection*{TOS}
\addcontentsline{toc}{subsubsection}{TOS}

\begin{figure}[H]
\begin{subfigure}{0.6\textwidth}

\includegraphics[width=0.8\textwidth]{bilder/b20.png}
\subcaption{Vorrang-Steuerung}
\end{subfigure}
\begin{subfigure}{0.6\textwidth}
\includegraphics[width=0.8\textwidth]{bilder/b21.png}
\subcaption{TOS-Bit}
\end{subfigure}
\caption[Abbildung 11: TOS]{TOS}
\end{figure}

\subsubsection*{DiffServ}
\addcontentsline{toc}{subsubsection}{DiffServ}

\subsubsection*{Total Length}
\addcontentsline{toc}{subsubsection}{Total Length}

\subsubsection*{Identification}
\addcontentsline{toc}{subsubsection}{Identification}

\subsubsection*{Flags}
\addcontentsline{toc}{subsubsection}{Flags}

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.7\textwidth]{bilder/b22.png}
\end{center}
\caption[Abbildung 12: Flags]{Flags}
\end{figure}

\subsubsection*{Fragment Offset}
\addcontentsline{toc}{subsubsection}{Fragment Offset}

\subsubsection*{TTL}
\addcontentsline{toc}{subsubsection}{TTL}

\subsubsection*{Protocol}
\addcontentsline{toc}{subsubsection}{Protocol}

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b23.png}
\end{center}
\caption[Abbildung 13: Protocol]{Protocol}
\end{figure}


\subsubsection*{Header Checksum}
\addcontentsline{toc}{subsubsection}{Header Checksum}

\subsubsection*{Source Adress}
\addcontentsline{toc}{subsubsection}{Source Adress}

\subsubsection*{Destination Adress}
\addcontentsline{toc}{subsubsection}{Destination Adress}

\subsubsection*{Options and Padding}
\addcontentsline{toc}{subsubsection}{Options and Padding}

\section*{IPv6-Header im Vergleich zu IPv4}
\addcontentsline{toc}{section}{IPv6-Header im Vergleich zu IPv4} 

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b24.png}
\end{center}
\caption[Abbildung 14: IPv6-Header]{IPv6-Header}
\end{figure}

\newpage \section*{Fragmentierung/Defragmentierung}
\addcontentsline{toc}{section}{Fragmentierung/Defragmentierung} 

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b18.png}
\end{center}
\caption[Abbildung 15: Fragmentierung]{Fragmentierung}
\end{figure}

\newpage  \section*{ICMP}
\addcontentsline{toc}{section}{ICMP} 
Das sogenannte Internet Control Message Protocol (ICMP) ist ein Bestandteil der IPv4 Adresse. Jedoch wird dies als ein eigenes Protokoll verwendet. Jeder Router, als auch jeder Rechner sind in der Lage mit dem ICMP Protokoll zu kommunizieren. Dieser ist für den Austausch von Informations- und Fehlermeldungen über das Internet-Protokoll in der Version 4 (IPv4) zuständig. Für IPv6 existiert ein ähnliches Protokoll mit dem Namen ICMPv6.

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b9.png}
\end{center}
\caption[Abbildung 16: ICMP]{ICMP}
\end{figure}
Der Abbildung ist zu entnehmen, dass die ICMP-Pakete vom Router (R1) zur Quelle (Host A) zurückgeschickt werden, sobald der Router Pakete verwirft. Dies geschieht genau dann, wenn das Ziel (Host B) nicht erreichbar ist oder die TTL (Time to live) abgelaufen ist. Die ICMP-Pakete enthalten in der Regel Informationen über das IPv4-Protokoll.

\section*{ICMP-Grundsätze}
\addcontentsline{toc}{section}{ICMP-Grundsätze} 

Das ICMP Protokoll benutzt das IP-Protokoll, um kommunizieren zu können. Das ICMP Protokoll sieht sich selbst als ein Protokoll einer höheren Schicht. Dies hat zur Folge, dass die ICMP-Nachrichten in den IP-Paketen eingegliedert werden. ICMP kann Fehlerzustände erkennen. Hierfür analysiert das Protokoll Fehler in jedem einzelnen IP-Datenpaket, die keine ICMP-Nachrichten beinhalten. Auf Datenpakete, die von einem Multicast oder Broadcast ausgelöst werden, werden keine ICMP-Nachrichten als Antwort versendet. ICMP Nachrichten antwortem nur Quell-IP-Adressen. Das Paket selbst ist eine 8-Bit Zahl, die sich im ICMP-Header befindet. 

\section*{Traceroute}
\addcontentsline{toc}{section}{Traceroute}

Unter einem Traceroute versteht man einen Programm, welches die Route und Internet-Knoten bestimmt, die IP-Datenpakete benötigen, um zum Ziel zu gelangen. Ihr Hauptziel ist es, welche Stationen ein Datenpaket einnimmt, um zum Ziel zu gelangen. Man sendet immer wieder IP-Datenpakete an den Ziel Rechner und beginnt mit einer TTL(Time to Live) =1. \\
Häufige Verwendung des Traceroute besteht darin, das Routing einer bestimmten Verbindung anzuzeigen oder der Auslöser von Verzögerungen zu identifizieren. \\ \\ \textbf{Was passiert bei Traceroute? }

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b10.png}
\end{center}
\caption[Abbildung 17: Traceroute]{Traceroute}
\end{figure}

Traceroute beginnt mit einer TTL von 1. Dabei sendet er fortlaufend IP-Datenpakete an den Ziel-Rechner. Sobald das erste Datenpaket bei einem Router angekommen ist, der dieses weiterleiten soll, wird die TTL um eins runtergezählt. Da der TTL nun 0 ist, wird dieser verworfen. Anschließend wird eine ICMP-Antwort gesendet vom Typ 11. Nämlich Time exceeded mit dem Code 0: Time to live exceeded in transit an den Absender. Das Datenpaket erhält folglich als Quelladresse die IP-Adresse des Routers. Im Anschluss sorgt Traceroute dafür, dass alle Informationen einschließlich der gesamten Übertragungsdauer aufgezeichnet werden. Danach werden alle Schritte wiederholt mit einer TTL, die um eins erhöht wird. Dies sorgt dafür, dass der nächste Router ermittelt wird. Wenn das Maximum an Hops erreicht wird oder der Zielrechner erreicht wird, dann hört die Wiederholung auf. Sobald der Zielrechner erreicht wird, sendet er bei ICMP-basiertem Traceroute die ICMP-Antwort Typ 0 ICMP Echo Reply und bei UDP-basiertem Traceroute Destination Unreachable Code 3 Port Unreachable. \\ \\ \textbf{Anwendung von Trace Route} \\ \\
Mit Traceroute kann geprüft werden, ob die Datenpakete mit der richtigen Route zum Ziel kommen. Falls dies über einen Umweg läuft, kann daraus schlussgefolgert werden, dass ein Router ausgefallen ist. Zudem kann die Laufzeit zwischen einzelnen Stationen geprüft werden. Falls es dazu kommen sollte, dass ein IP-Paket nicht zum Ziel gelangt, dann kann mit Traceroute die ausgefallene Station ermittelt werden. Wenn mehrere Stationen häufiger vorkommen, könnte die Ursache darin liegen, dass ein Router durch einen fehlerhaften Routing-Eintrag eine Routing-Schleife verursacht.

\section*{Domain Name System}
\addcontentsline{toc}{section}{Domain Name System}
Die Hauptaufgabe des Domain Name Systems ist die Beantwortung von Anfragen zur Namensauflösung. DNS wird in vielen IP-basierten Netzwerken verwendet.
Jeder Nutzer sendet als Anfrage den Domainnamen übers Internet. Dieser wird vom DNS in die dazugehörige IP-Adresse umgewandelt und kann so einem Rechner zugeordnet werden.

\section*{Domain Namensraum}
\addcontentsline{toc}{section}{Domain Namensraum}

Der Domain Namensraum besitzt eine baumartige Struktur. Dabei nennt man die Blätter und Knoten des Baumes Labels. Will man den kompletten Domainnamen erhalten, so müssen alle Labels desselben Pfades miteinander verkettet werden. Innerhalb einer Domäne kennen die Name-Server nur die Domain-Adressen der direkt höheren oder unteren Nameserver. Zudem bekommt jede Ebene einen eigenen Namen. In Abbildung 10 sind die Domainnamen jeweils mit einem Punkt voneinander getrennt. Die Wurzel repräsentiert immer den DNS-Root.

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b11.png}
\end{center}
\caption[Abbildung 18: Domain Namensraum]{Domain Namensraum}
\end{figure}

\section*{Domain Name Server}
\addcontentsline{toc}{section}{Domain Name Server} 

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b12.png}
\end{center}
\caption[Abbildung 19: Domain Name Server]{Domain Name Server}
\end{figure}

Jeder DNS-Teilnehmer hat auf seinem eigenen Computer Resolver, die installiert sind. Diese rufen Informationen von Nameservern ab und sind selbst Software-Module. Sie übernehmen die Anfragen der Anwendung und übermitteln diese an einen Nameserver und bilden somit die Schnittstelle. Man unterscheidet zwischen einem rekursiv arbeitenden Resolver und einem iterativ arbeitenden. \\
Im rekursiven Fall schickt der Resolver eine rekursive Anfrage an einen Nameserver. Dieser schaut im eigenen Datenbestand, ob die benötigten Informationen vorhanden sind. Falls diese nicht vorhanden sind, werden weitere Nameserver kontaktiert. Somit übernehmen die Nameserver die ursprüngliche Aufgabe des Resolvers, da dieser die Anfrage an die Nameserver weiterleitet. \\
Bei der iterativen Anfrage hingegen bekommt der Resolver entweder den gewünschten Resource Record oder einen Verweis auf weitere Nameserver, die er als nächstes kontaktiert. Dies geschieht solange, bis der Nameserver eine korrekte Antwort bekommt, mit der er arbeiten kann. Der Resolver übergibt die Antwort an ein Programm, welches die Daten angefordert hat. Dies kann zum Beispiel ein Webbrowser sein, der die Anfrage gestellt hat.

\section*{Auflösung eines DNS Requests}
\addcontentsline{toc}{section}{Auflösung eines DNS Requests} 

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{bilder/b25.png}
\end{center}
\caption[Abbildung 20: Auflösung eines DNS Requests]{Auflösung eines DNS Requests}
\end{figure}
Bei einer Auflösung eines DNS Requests will ein Rechner eine Verbindung zu einer Seite aufbauen. Dafür benötigt er die IP-Adresse. Dies geschieht mittels Namensauflösung. Dafür müssen folgende Schritte durchlaufen werden. Zunächst sucht der Rechner in seiner eigenen Hosts-Datei, ob die gesuchte IP-Adresse der Webseite schon vorhanden ist. Wenn diese nicht vorhanden ist, fragt dieser einen DNS-Server. Der DNS-Server wird entweder per DHCP automatisch zugewiesen oder der Nameserver ist vorher schon eingetragen. Wenn der DNS-Server die IP-Adresse des angefragten Namens zwischengespeichert hat, liefert er diesen und die Anfrage wird beendet. Ansonsten fragt er einen der 13 Root-Nameservern nach der gesuchten IP-Adresse. Der Root-Nameserver findet zunächst die Zone heraus in welcher sich die Auflösung des Namens befindet. Die Zone ist zunächst die Endung des Namens. In der Abbildung ist dies die org-Zone. Anschließend werden die Namen und die zugehörigen IP-Adressen der entsprechenden Nameserver an den DNS-Server zum Ausgangsrechner gesendet. Dort fragt der DNS-Server den entsprechenden Nameserver für den org-Domain nach der Webseite. Der org-Nameserver sendet alle Namen der Nameserver inklusive der IP-Adressen für die entsprechende Zone. Im Anschluss wird nach der zugehörigen IP-Adresse gefragt, mit welcher an den DNS-Server von dem Ausgangsrechner geantwortet wird. Dieser sendet sie an den Ausgangsrechner, welcher nun seine HTTP-Anfragen an die zugehörige IP-Adresse senden kann.

\section*{DNS-Angriffe}
\addcontentsline{toc}{section}{DNS-Angriffe}

\subsection*{Denial of Service (DoS)}
\addcontentsline{toc}{subsection}{Denial of Service (DoS)}

\subsection*{DNS Amplification}
\addcontentsline{toc}{subsection}{DNS Amplification}

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b13.png}
\end{center}
\caption[Abbildung 21: DNS Amplification]{DNS Amplification}
\end{figure}

\subsection*{Spoofing/Phishing}
\addcontentsline{toc}{subsection}{Spoofing/Phishing}

\begin{figure}[H]
\begin{center}
\includegraphics[width=1\textwidth]{bilder/b14.png}
\end{center}
\caption[Abbildung 22: Spoofing/Phishing]{Spoofing/Phishing}
\end{figure}

\subsection*{Cache Poisoning}
\addcontentsline{toc}{subsection}{Cache Poisoning}

\subsection*{Fast-Flux DNS}
\addcontentsline{toc}{subsection}{Fast-Flux DNS}


%\backmatter 

\newpage \section*{Literaturverzeichnis und Quellenverzeichnis}
\addcontentsline{toc}{section}{Literaturverzeichnis und Quellenverzeichnis}
\textbf{{\LARGE Internetquellen:}}\\
\url{http://www.itwissen.info/IP-Multicast-IP-multicast.html}\\
\url{http://ip-klaeden.selfhost.eu/netz/iuk99/kap1a/ipfrag.htm} \\
\url{https://www.elektronik-kompendium.de/sites/net/0901141.htm} \\
\url{http://openbook.rheinwerk-verlag.de/c\_von\_a\_bis\_z/025\_c\_netzwerkprogrammierung\_001.htm\#mja8101c6e0e4cb2e6fd8312114dad30d7} \\
\url{http://www.itwissen.info/} \\
\url{https://de.wikipedia.org/wiki/Paketvermittlung} \\
\url{https://de.wikipedia.org/wiki/Internet\_Protocol }\\
\url{https://www.elektronik-kompendium.de/sites/net/2011211.htm} \\
\url{http://www.itwissen.info/IPv4-Internet-protocol-version-4-IPv4-Protokoll.html} \\
\url{http://www.itwissen.info/IPv6-Internet-protocol-version-6-IPv6-Protokoll.html} \\
\url{http://www.webschmoeker.de/grundlagen/internet-protocol/\#was\_bedeuten\_die\_einzelnen\_felder\_des\_ip-headers} \\
\url{http://www.informatik.uni-hamburg.de/TKRN/world/lernmodule/LMint/Popup/IP.htm} \\
\url{http://einstein.informatik.uni-oldenburg.de/rechnernetze/diagramm.htm} \\
\url{http://www.cip.ifi.lmu.de/\~leinfeld/tcpip/node9.html} \\
\url{http://www.linux-praxis.de/linux2/datagram.html} \\
\url{https://www.tecchannel.de/a/grundlagen-zu-routing-und-subnetzbildung,434734,9} \\
\url{https://de.wikipedia.org/wiki/IP-Paket}\\ \\ \\

\textbf{{\LARGE Bildquellen:}}\\
\url{http://www.dslundfestnetz.net/images/Fotolia\_76722255\_XS.jpg} \\
\url{http://www.techweekeurope.co.uk/wp-content/uploads/2012/09/shutterstock\_98826353.jpg} \\
DKR-Skript/5.2 Vermittlungstechniken - Screenshot \\
\url{https://en.wikipedia.org/wiki/Broadcasting\_(networking)} \\
\url{https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Multicast.svg/1200px-Multicast.svg.png}\\ 
\url{https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/DSLite.svg/939px-DSLite.svg.png} \\ 
\url{https://upload.wikimedia.org/wikipedia/commons/thumb/9/95/Regional\_Internet\_Registries\_world\_map.svg/940px-Regional\_Internet\_Registries\_world\_map.svg.png} \\
\url{http://www.itwissen.info/lex-images/tos-feld-im-ip-header.png} \\
\url{http://www.itwissen.info/lex-images/bitkombinationen-fuer-das-tos-datenfeld.png} \\
\url{http://www.freesoft.org/CIE/RFC/791/ipflags.gif} \\
\url{http://www.itwissen.info/lex-images/protokollnummern-fuer-das-protokolltyp-feld.png} \\
\url{http://ip-klaeden.selfhost.eu/netz/iuk99/kap1a/b\_frag.gif}  \\
\url{http://www.itwissen.info/lex-images/hierarchie-der-dns-adresse.png} \\
\url{https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Dns-abfrage.svg/568px-Dns-abfrage.svg.png} \\
\url{https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/IP\_spoofing\_en.svg/220px-IP\_spoofing\_en.svg.png} \\

\end{document}